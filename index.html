<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ninja Name Generator</title>
    <meta name="author" content="bmcminn <https://github.com/bmcminn>">
    <meta name="description" content="A simple Ninja name generator based on a popular reddit image">
    <meta name="referrer" content="no-referrer">

    <!-- <meta property="og:image" content=""> -->
    <meta property="og:url" content="https://bmcminn.github.com/ninja-name-generator">
    <meta property="og:title" content="Ninja Name Generator">
    <meta property="og:description" content="A simple Ninja name generator based on a popular reddit image">
    <meta property="og:type" content="website">


    <style>
        html {
            font-family: sans-serif;
        }
        .text-center { text-align: center }
        .title-case { text-transform: capitalize; }

        #app { 
            margin: 2em auto
        }

        input {
            padding: 0.5em;
            border-radius: 0.2em
        }
        img { 
            max-width: 100%;
            width: auto;
            height: auto;
        }
        .muted { color: #747474; }
        figcaption {
            font-style: italic;
        }
        .mt-1 { margin-top: 1em }
        .mt-3 { margin-top: 2em }
        .mt-2 { margin-top: 3em }
        .generator-menu {
            background-color: #f0f0f0;
            padding: 1em 1em 1em;
        }
    </style>

</head>
<body>

    <div class="text-center">

        <noscript>This app does not work without JavaScript. Enable it in your browser and refresh if you wish to use this site!</noscript>
        
        <main id="app">
            <h1>Your {{ generator.name }}</h1>

            <p v-if="generator.description">{{ generator.description }}</p>

            <input type="text" v-model="name">

            <div>
                <p v-if="name.length > 0" class="title-case">
                    {{ generator.translate(name) }}
                    <button type="button" @click="doCopy">Copy!</button>
                </p>
                <p v-else class="title-case muted">Enter your name!</p>
            </div>

            <figure v-if="generator.image">
                <img v-bind:src="'assets/'+generator.image.file" alt="" v-bind:width="generator.image.width" v-bind:height="generator.image.height" style="width: 250px; " />
                <figcaption class="muted">{{ generator.image.tagline }} by <a v-bind:href="generator.image.author.link">{{ generator.image.author.name}}</a></figcaption>
            </figure>


            
            <div class="mt-3 generator-menu">
                <div>Checkout out other Name Generators!</div>
                <select class="mt-1" name="generator-switch" id="generator-switch" v-model="generator"
                @change="switchApp"
                >
                    <option disabled value="">Pick a name generator!</option>
                    <option v-for="(item, key) in Generators" :key="item.name" :value="key">
                        {{ item.name }}
                    </option>
                </select>
            </div>


            <p class="mt-3">
                {{ generator.name }} is MIT licensened and is made by 
                <a v-bind:href="generator.author.link">{{ generator.author.name }}</a>
            </p>

        </main>



    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.min.js" integrity="sha512-BKbSR+cfyxLdMAsE0naLReFSLg8/pjbgfxHh/k/kUC82Hy7r6HtR5hLhobaln2gcTvzkyyehrdREdjpsQwy2Jw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-clipboard2/0.3.1/vue-clipboard.min.js" integrity="sha512-zNpg4bcFZvamz8fgq5nf9CMLlMdsT2Jy6Bb1tUOPtUCRTZuKnHa1I7yYWW2EOT16CgXohsx6gNnTNpKZpqJzSQ==" crossorigin="anonymous"></script>
    <script>

        function getQueryProperty(property) {
            let query = window.location.search.substring(1);
            let vars = query.split('&');
            for (let i = 0; i < vars.length; i++) {
                let [ key, value ] = vars[i].split('=');
                if (decodeURIComponent(key.trim()) == property) {
                    return decodeURIComponent(value);
                }
            }
            console.log('Query property %s not found', property);
        }

        function randomNumber(min, max) {  
            return Math.random() * (max - min) + min; 
        }  

        function randomNumberInt(min, max) {  
            return Math.floor(Math.random() * (max - min) + min); 
        }  



        const Generators = {
            ninja: {
                name: 'Ninja Name Generator',
                author: {
                    name: '@bmcminn',
                    link: 'https://github.com/bmcminn/ninja-name-generator',
                },
                image: {
                    file: 'your-ninja-name-key.webp',
                    width: 512,
                    height: 415,
                    tagline: 'Ninja name key by',
                    author: {
                        name: 'u/hauntedmango',
                        link: 'https://www.reddit.com/r/funny/comments/gi3sc/this_is_how_to_find_your_ninja_name/',
                    },
                },

                translate(name) {
                    const letters = {
                        a: 'ka',
                        b: 'zu',
                        c: 'mi',
                        d: 'te',
                        e: 'ku',
                        f: 'lu',
                        g: 'ji',
                        h: 'ri',
                        i: 'ki',
                        j: 'zu',
                        k: 'me',
                        l: 'ta',
                        m: 'rin',
                        n: 'to',
                        o: 'mo',
                        p: 'no',
                        q: 'ke',
                        r: 'shi',
                        s: 'ari',
                        t: 'chi',
                        u: 'do',
                        v: 'ru',
                        w: 'mei',
                        x: 'na',
                        y: 'fu',
                        z: 'zi',
                    }

                    return name.split('')
                                .map(el => letters[el.toLowerCase()] ? letters[el.toLowerCase()] : el)
                                .join('')
                },    
            },

            fuck: {
                name: 'Fuck Name Generator',
                description: 'Replaces the first four letters of each of your names with "Fuck"',
                author: {
                    name: '@bmcminn',
                    link: 'https://github.com/bmcminn/ninja-name-generator',
                },
                // image: {
                //     file: 'your-ninja-name-key.webp',
                //     width: 512,
                //     height: 415,
                //     tagline: 'Ninja name key by',
                //     author: {
                //         name: 'u/hauntedmango',
                //         link: 'https://www.reddit.com/r/funny/comments/gi3sc/this_is_how_to_find_your_ninja_name/',
                //     },
                // },
                translate(name) {
                    let replacement = 'Fuck'
                    return name.split(' ').map(el => {
                        return el.substring(replacement.length).replace(/^/, replacement)
                    }).join(' ')
                },
            },
        }


        const app = new Vue({
            el: '#app',
            data: {
                name: '',
                generator: null,

            },
            
            created() {
                let generator = getQueryProperty('generator')

                console.debug('generator', generator)

                if (!generator || !Generators[generator]) {
                    generator = this.getRandomGenerator()
                }

                this.generator = Generators[generator]
                console.debug('generator', this.generator)
            },

            methods: {

                getRandomGenerator() {
                    let gens = Object.keys(Generators)
                    console.debug('gens', gens)
                    let randomInt = randomNumberInt(0, gens.length)
                    console.debug('randomInt', randomInt)
                    let generator = gens[randomInt]
                    console.debug('generator', generator)
                    
                    console.log(generator)

                    return generator
                },

                doCopy() {
                    this.$copyText(this.generator.translate(this.name))
                        .then(function (e) {
                            alert('Copied')
                            console.log(e)
                        }, function (e) {
                            alert('Can not copy')
                            console.log(e)
                        })
                },

                switchApp(e) {
                    window.location.search = `generator=${e.target.value}` 
                }
            }
        })




    </script>

</body>
</html>




